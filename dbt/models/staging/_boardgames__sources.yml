version: 2

sources:
    - name: boardgame
      description: This database contains data about boardgames
      database: boardgame
      schema: raw
      tables:
        - name: reviews
          description: Table that contains the reviews that have been submited for users in the range from 1-10
          columns:
            - name: user
              description: Username registered on boardgamegeek website 
              tests:
                - not_null
            - name: rating
              description: Number from 1-10 to rate the boardgame
              tests:
                - not_null
            - name: id
              description: Boardgame unique identifier
              tests:
                - not_null
        - name: users
          description: Table with the information of the users of BoardGameGeek
          columns:
            - name: users
              description: Username registered on boardgamegeek website
              tests:
                - not_null
                - unique
            - name: url
              description: Url from that user
              tests:
                - not_null
                - unique
            - name: country
              description: Country where the user was born
        
        - name: rankings
          description: Table that contains the rankings of different boardgames
          freshness:
            warn_after: {count: 24, period: hour}
            error_after: {count: 48, period: hour}
          loaded_at_field: '"updated_at"'
          columns:
            - name: id
              description: Boardgame unique identifier

              tests:
                - not_null
                - unique
            - name: Name
              description: Name of the Boardgame
              quote: true
              tests:
                - not_null
            - name: Year
              description: Year the boardgame was published
              quote: true
              tests:
                - not_null
            - name: Rank
              description: Number representing the ranking of the boardgame (lower the better)
              quote: true
              tests:
                - not_null
                - unique
            - name: Average
              description: Average from all the ratings from the reviews
              quote: true
              tests: 
                - not_null
            - name: Bayes average
              description: In order to prevent a new or rare game with only a few high ratings from taking the top spots in the ranking, 30 average ratings are added to every rating to form the Bayesian average. As more ratings are received, the effect of these "damper ratings" is reduced to nil.
              quote: true
              tests:
                - not_null
            - name: Users rated
              description: Number of users that gave a review to a boardgame
              quote: true
              tests:
                - not_null
            - name: url
              description: Boardgame url on boardgamegeek website
              tests:
                - not_null
            - name: Thumbnail
              description: Thumbnail image of the boardgame
              quote: true
            - name: updated_at
              description: Date on timestamp format
              quote: true
              tests:
                - not_null
        - name: boardgames
          description: Table with boardgames main properties
          columns:
            - name: game_id
              description: Boardgame unique identifier
              tests:
                - unique
                - not_null
                - dbt_expectations.expect_column_values_to_be_of_type:
                    column_type: number
                    name: expect_boardgames_game_id_to_be_of_type_number
            - name: name
              description: Name of the Boardgame
              tests:
                - not_null
            - name: type
              description: Type of game (ex. boardgame)
              tests:
                - accepted_values:
                    name: accepted_boardgames_types
                    values: [bgsleeve, boardgame, boardgameaccessory, boardgameexpansion, boardgameissue, puzzle, rpgissue, rpgitem, videogame, videogamecompilation, videogameexpansion, videogamehardware]
            - name: rating
              description: average from all the ratings from the reviews (0-10)
            - name: weight
              description: average complexity rating from the users (0-5)
            - name: year_published
              description: year the boardgame was published
              tests:
                - not_null
                - dbt_expectations.expect_column_values_to_be_of_type:
                    column_type: number
                    name: expect_boardgames_boardgame_year_published_to_be_of_type_number
                - dbt_expectations.expect_column_values_to_match_regex:
                    regex: "^.?\\\\d{1,4}$"
                    name: expect_column_values_to_match_regex_boardgames_year_published
            - name: min_players
              description: minimum number of players supported by the boardgame
              tests:
                - not_null
                - dbt_expectations.expect_column_values_to_be_of_type:
                    column_type: number
                    name: expect_boardgames_min_players_to_be_of_type_number
            - name: max_players
              description: maximum number of players supported by the boardgame
              tests:
                - not_null
                - dbt_expectations.expect_column_values_to_be_of_type:
                    column_type: number
                    name: expect_boardgames_max_players_to_be_of_type_number
            - name: min_play_time
              description: minimum playtime estimated to play the boardgame (minutes)
              tests:
                - not_null
                - dbt_expectations.expect_column_values_to_be_of_type:
                    column_type: number
                    name: expect_boardgames_min_play_time_to_be_of_type_number
            - name: max_play_time
              description: maximum playtime estimated to play the boardgame (minutes)
              tests:
                - not_null
                - dbt_expectations.expect_column_values_to_be_of_type:
                    column_type: number
                    name: expect_boardgames_max_play_time_to_be_of_type_number
            - name: min_age
              description: minimum age recommended to play the boardgame
              tests:
                - not_null
                - dbt_expectations.expect_column_values_to_be_of_type:
                    column_type: number
                    name: expect_boardgames_min_age_to_be_of_type_number
            - name: owned_by
              description: number of people that own the boardgame
              tests:
                - not_null
        - name: artists
          description: Table that contains information about the artists that work on some boardgame
          columns:
            - name: artists
              description: Name of the artists responsible for the art and graphical design of the boardgame
              tests:
                    - not_null
            - name: game_id
              description: Boardgame unique identifier
              tests:
                    - not_null
        - name: categories
          description: Table that contains information about the categorie a boardgame fell in
          columns:
            - name: categories
              description: Name of the categories that each boardgame belongs
              tests:
                - not_null
            - name: game_id
              description: Boardgame unique identifier
              tests:
                - not_null
        - name: designers
          description: Table that contains information about the designer that work on some boardgame
          columns:
            - name: designers
              description: Name of the designers responsible for the mechanics and concept implementation of the boardgame
              tests:
                - not_null
            - name: game_id
              description: Boardgame unique identifier
              tests:
                - not_null
        - name: mechanics
          description: Table that contains information about the mechanics of a boardgame
          columns:
            - name: mechanics
              description: Name of the mechanics that each boardgame delivers
              tests:
                - not_null
            - name: game_id
              description: Boardgame unique identifier
              tests:
                - not_null
        - name: publishers
          description: Table that contains information about the publisher of a boardgame
          columns:
            - name: publishers
              description: Name of the publishers that support the distribution of the boardgames
              tests:
                - not_null
            - name: game_id
              description: Boardgame unique identifier
              tests:
                - not_null

